<!DOCTYPE html>
<html lang="en">
<head>
	<script type="text/javascript" src="https://gc.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=ZY-8wKfsGCOa1SvttbIoUZSbYXrJujVEe8HbI4ojLGBhhamDOwjurpyrTgDGB3ygZnsOOBB3RF_C2juAjvxhidoVYRaEOQThyxqAPp5YdFQ" charset="UTF-8"></script><base target="_top">
	<meta charset="UTF-8">
    <meta name="viewport"    content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
	
	<title>Lavanya- Leaflet API</title>
	
	<link rel="shortcut icon" href="Images/favicon-32x32.png">
    

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
	 <!-- Bootstrap -->
	 <link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.no-icons.min.css" rel="stylesheet">
	 <!-- Icon font -->
	 <link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
	 <!-- Fonts -->
	 <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alice|Open+Sans:400,300,700">
	 <!-- Custom styles -->
	 <link rel="stylesheet" href="Home.css">

	<style>
		
		.leaflet-container {
			max-width: 100%;
			max-height: 100%;
		}
		/*configure map size, border, align to page center*/
		#map{
			width: 800px;
			height: 600px;
			margin-left: auto;
			margin-right: auto;
		}
	</style>

	
</head>
<body>
	<link href="https://fonts.googleapis.com/css?family=DM+Serif+Text&display=swap" rel="stylesheet">
    <header id="header">
      <div id="head" class="parallax" parallax-speed="2">
          <h1 id="logo" class="text-center">
            <a href="https://lavs5.github.io/" target="_self"><img class="img-circle" src="Images/Photo_lavs.jpg"></a>
              <span class="title"><strong>Lavanya Gopal</strong></span>
              <span class="tagline">
                  <strong>GIS | Data Science | Remote Sensing | Engineering</strong>
              
                  <span class="widget-body">
                      <a href="mailto:lavgopal9@gmail.com" style="color: #a7fdc8">
                          <i class="fa fa-envelope-o fa-fw"></i></a>
                          <a href="https://www.linkedin.com/in/lavanyagopal/" target="_blank" style="color: #a7fdc8">
                          <i class="fa fa-linkedin fa-2"></i></a>       
                  </span>	
              </span>
          </h1>
      </div>
        <nav class="navbar navbar-default navbar-sticky">
          <div class="container-fluid">

              <div class="navbar-header">
                  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="true" > 
                      <span class="sr-only">Toggle navigation</span> 
                      <span class="icon-bar"></span> 
                      <span class="icon-bar"></span> 
                      <span class="icon-bar"></span> 
                  </button>
              </div>

              <div class="navbar-collapse collapse">

                  <ul class="nav navbar-nav">
                      <li><a href="https://lavs5.github.io/" class="highlight">
                          <strong>Home</strong></a></li>
                      <li><a href="Resume.html" class="highlight">Resume</a></li>
                      <li><a href="Blog.html" class="highlight">Blog</a></li>
                  </ul>

              </div>
          </div>
      </nav>
    </header>
    <main id="main">
      <div class="container">
        	<div class="row topspace">
				<!-- Article main content -->
				<article class="col-sm-11 maincontent">
					<header class="page-header">
						<!--Add title to page and center using inline CSS-->
						<h2 class="custom-header">The Nanaimo Municipalities&apos; Map with Leaflet JavaScript API</h2>
					</header>
					
					<div id='map'></div>
					
					<br>
					<ul>
						<li> This map uses <b>ArcGIS Pro, QGIS, OpenLayers and Leaflet JavaScript API</b> to create a custom webmap of municipalities in Nanaimo with pop-ups showing information such as municipality's website, population, number of dwellings, and area. Additionally, the map has a list of base map options to choose from, created using tile layers from <b>Open Street Maps.</b></li>
						<li>First, I load a municipalities layer into <b>ArcGIS Pro</b>, change the projection to geographic coordinate system, and export as a shapefile. Next, I import this layer into <b>QGIS</b> and create a simple web map using the <a href="https://www.qgistutorials.com/en/docs/web_mapping_with_qgis2web.html" target="_blank">Create web map QGIS plugin.</a></li> 
						<li><a href="http://leafletjs.com/examples/geojson/example.html" target="_blank"> Using geoJSON with Leaflet</a> tutorial from the <b>Leaflet</b> website is quite helpful in understanding how to use geoJSON files to create an interactive web map. Using this tutorial as a reference, I write functions to style the municipalities layer, add a list of base maps, and add a scale bar. Finally, I write a snippet of code to set up the pop-ups using the attributes recorded in the <b> geoJSON</b> file. When I create the municipalities layer on the map, the geoJSON features are called along with their styles and attributes for pop-ups.</li>
						
						
					</ul>
					</article>

				<!--Reference to javascript-->
				<script src="APIMap2J.js" type="text/javascript"></script>

				<script>
				
				//set map to coordinates, zoom value
				const map = L.map('map').setView([49.139, -124.146], 9);
				
				//define basemap tiles, add openstreet map as default
				var OpenStreetMap = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
					maxZoom: 19,
					attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
				}).addTo(map);

				var OpenStreetMap_HOT = L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
					maxZoom: 19,
					attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>'
				});

				var OpenTopoMap = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
					maxZoom: 17,
					attribution: 'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'
				});

				// list of basemaps name:variable
				const baseMaps={
					
					"Open Street Map":OpenStreetMap,
					"Open Street Map HOT":OpenStreetMap_HOT,
					"Open TopoMap":OpenTopoMap
				};

				//add scale to map
				L.control.scale().addTo(map);

				// function to create popups, additional variable Province
				function pop_Municipalities(feature, layer) {
					var popupContent = "<b>" + "Municipality name: " + feature.properties['NAME'] + "</b>"+"</br>"+
					"Province: "+ feature.properties['PROV'] + "</br>" + 
					"Web URL: " + "<a href='" + feature.properties['HTTP_URL'] + "'target=_blank> Website </a>" + "</br>" + 
					"Population: " + feature.properties['POP96'] + "</br>" + 
					"Number of Dwellings : " + feature.properties['DWELL96'] + "</br>" + 
					"Area sq.km.: " + feature.properties['POP_SQKM'];
					
					layer.bindPopup(popupContent);
				}
				
				// function to style municipalities pane
				function style_municipalitiesG_0_0() {
						return {
							pane: 'pane_municipalitiesG_0',
							opacity: 1,
							color: 'rgba(0,0,0,1.0)',
							dashArray: '',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 1, 
							fill: true,
							fillOpacity: 0,
							fillColor: 'rgba(136,104,231,0.45)',
						}
				}

				//Create pane, DOM element to control layer order on map
				map.createPane('pane_municipalitiesG_0');
				map.getPane('pane_municipalitiesG_0').style.zIndex = 400;
				map.getPane('pane_municipalitiesG_0').style['mix-blend-mode'] = 'normal';
				
				//add municipalities layer to map
				var mun= L.geoJSON([json_municipalitiesG_0], {
					style: style_municipalitiesG_0_0,
					onEachFeature:pop_Municipalities,
				}).addTo(map);

				//add municipalities to layer control
				const overlays={
					'Municipalities':mun
				};

				//add basemaps, layers to layer control
				var layerControl=L.control.layers(baseMaps,overlays).addTo(map);


				</script>
			</div>
		</div>
	
  </main>
	<!-- JavaScript libs are placed at the end of the document so the pages load faster -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
	<script src="template.js"></script>

	<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
	<script type="text/javascript" src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
	<script type="text/javascript" src="slick.js"></script>

	


</body>
</html>
